(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5e8c6f4","chunk-9153e964","chunk-a32d7ca2","chunk-1918dcde","chunk-2d0bd642"],{"1ffb":function(e,t,a){},"2c94":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"card"},on:{"tab-click":function(t){return e.handleClick(e.currentVal)}},model:{value:e.currentVal,callback:function(t){e.currentVal=t},expression:"currentVal"}},e._l(e.labels,(function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.label,name:e.name}})})),1)},r=[],s=(a("b0c0"),{props:{labels:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{currentVal:this.labels[0].name}},methods:{handleClick:function(e){this.$emit("TabChange",e)}}}),l=s,i=a("2877"),c=Object(i["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},"361b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",{attrs:{type:"ghost"}},[a("template",{slot:"header"},[e._v("歌单管理")]),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"d2-mr-20",attrs:{span:12}},[a("el-card",[a("el-collapse",{model:{value:e.currentCollapse,callback:function(t){e.currentCollapse=t},expression:"currentCollapse"}},[a("el-collapse-item",{staticClass:"m-collapse ",attrs:{name:"songlist"}},[a("template",{slot:"title"},[a("h3",[e._v("歌曲列表")]),a("i",{staticClass:"header-icon el-icon-info"})]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%",border:"none"},attrs:{data:e.songlistTableData}},[a("el-table-column",{attrs:{prop:"name",label:"歌名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{attrs:{flex:" cross:center"}},[a("el-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:n.image,lazy:""}}),a("el-tooltip",{attrs:{effect:"dark",content:n.name,placement:"right"}},[a("span",{staticClass:"list-item"},[e._v(" "+e._s(n.name))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"singer",label:"歌手名"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{attrs:{flex:" cross:center"}},[a("el-tooltip",{attrs:{effect:"dark",content:n.singer,placement:"right"}},[a("span",{staticClass:"list-item"},[e._v(" "+e._s(n.singer))])])],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete-solid"},on:{click:function(t){return e.del(n)}}})]}}])})],1)],2),a("el-collapse-item",{staticClass:"m-collapse",attrs:{name:"searchlist"}},[a("template",{slot:"title"},[a("h3",[e._v("搜索列表")]),a("i",{staticClass:"header-icon el-icon-info"})]),a("el-table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],staticStyle:{width:"100%",border:"none"},attrs:{data:e.searchTableData,"infinite-scroll-delay":"1000","infinite-scroll-immediate":!1,"infinite-scroll-disabled":e.end}},[a("el-table-column",{attrs:{prop:"name",label:"歌名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{attrs:{flex:" cross:center"}},[a("el-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:n.image}}),a("el-tooltip",{attrs:{effect:"dark",content:n.name,placement:"right"}},[a("span",{staticClass:"list-item"},[e._v(" "+e._s(n.name))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"singer",label:"歌手名"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{attrs:{flex:" cross:center"}},[a("el-tooltip",{attrs:{effect:"dark",content:n.singer,placement:"right"}},[a("span",{staticClass:"list-item"},[e._v(" "+e._s(n.singer))])])],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"success",plain:"",size:"mini",icon:"el-icon-folder-add",disabled:n.used},on:{click:function(t){return e.addSong(n)}}})]}}])}),a("template",{slot:"append"},[!e.end&&e.loading?a("p",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-loading",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}}):e._e(),e.end&&e.searchTableData.length?a("p",{staticClass:"m-loading"},[e._v(" 已经到最底了! ")]):e._e()])],2)],2)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}]},[a("tabs",{attrs:{labels:e.labels},on:{TabChange:e.TabChange}}),a("keep-alive",[a(e.currentComponent,{tag:"component",attrs:{propName:e.name,propDesc:e.desc,propList:e.songlistTableData},on:{update:e.update,changeList:e.changeList,importplaylist:e.importplaylist,truncate:e.truncate}})],1)],1)],1)],1)],2)},r=[],s=(a("99af"),a("7db0"),a("c740"),a("d81d"),a("a434"),a("b0c0"),a("2909")),l=a("5530"),i=(a("96cf"),a("1da1")),c=a("2c94"),o=a("f888"),u=a("55ba"),p=a("d44d"),m={name:"playlist",components:{tabs:c["default"],addPlayList:o["default"],searchAdd:u["default"],setting:p["default"]},data:function(){return{currentPage:1,searchParams:{},end:!1,loading:!1,data:[],name:"",desc:"",currentCollapse:["songlist"],searchTableData:[],songlistTableData:[],currentComponent:"setting",labels:[{label:"基本设置",name:"setting"},{label:"搜索添加",name:"searchAdd"},{label:"歌单导入",name:"addPlayList"}]}},methods:{load:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.searchTableData.length){t.next=2;break}return t.abrupt("return");case 2:e.$confirm("要加载下一页吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$api.SYS_PLAYLIST_SEARCH(Object(l["a"])(Object(l["a"])({},e.searchParams),{},{uuid:e.$route.params.id,page:"netease"===e.searchParams.platform?e.currentPage+=+e.searchParams.limit:e.currentPage+=1}));case 4:a=t.sent,e.searchTableData=[].concat(Object(s["a"])(e.searchTableData),Object(s["a"])(e._normlize(a))),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.loading=!1,e.end=!0;case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))).catch(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$message({type:"info",message:"已取消加载"});case 1:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})))()},truncate:function(){this.songlistTableData=[]},importplaylist:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.songlistTableData=[].concat(Object(s["a"])(t.songlistTableData),Object(s["a"])(e)),t.$nextTick((function(){t.currentCollapse.push("songlist")}));case 2:case"end":return a.stop()}}),a)})))()},del:function(e){this.songlistTableData.splice(this.songlistTableData.findIndex((function(t){return t.id===e.id})),1),this.$set(e,"used",!1)},addSong:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.songlistTableData.find((function(t){return t.id===e.id}))){a.next=2;break}return a.abrupt("return",t.$message.warning("歌曲重复"));case 2:t.currentCollapse.push("songlist"),t.songlistTableData.push(e),t.$set(e,"used",!0);case 5:case"end":return a.stop()}}),a)})))()},changeList:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a.currentPage=1,a.searchParams=t,a.searchTableData=a._normlize(e),a.$nextTick((function(){a.currentCollapse.push("searchlist")}));case 4:case"end":return n.stop()}}),n)})))()},TabChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.currentComponent=e;case 1:case"end":return a.stop()}}),a)})))()},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading2=!0,t.next=3,e.$api.SYS_PLAYLIST_FIND(e.$route.params.id);case 3:a=t.sent,n=a.data,e.name=n.name,e.desc=n.desc,e.songlistTableData=JSON.parse(n.playlist)||[],e.$nextTick((function(){e.loading2=!1,e.$forceUpdate()}));case 9:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()},_normlize:function(e){return e.map((function(e){return Object(l["a"])({},e)}))}},watch:{$route:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()}},d=m,f=(a("b249"),a("2877")),b=Object(f["a"])(d,n,r,!1,null,"08299e55",null);t["default"]=b.exports},"55ba":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"请使用“歌曲名”或“歌曲名歌手名”搜索",type:"success",closable:!1}}),a("el-select",{staticClass:"block-mb-15 w-50",attrs:{placeholder:"请选择平台"},model:{value:e.form.platformVal,callback:function(t){e.$set(e.form,"platformVal",t)},expression:"form.platformVal"}},e._l(e.form.platform,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"block-mb-15 w-50",attrs:{placeholder:"请选择搜索条数"},model:{value:e.form.searchItemVal,callback:function(t){e.$set(e.form,"searchItemVal",t)},expression:"form.searchItemVal"}},e._l(e.form.searchItem,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value+"条",value:e.value}})})),1),a("el-input",{staticClass:" d2-mt-15",attrs:{placeholder:"请输入搜索词",clearable:""},model:{value:e.form.input,callback:function(t){e.$set(e.form,"input",t)},expression:"form.input"}},[a("el-button",{staticClass:"m-hover m-btn",attrs:{slot:"append",icon:"el-icon-search",type:"primary",loading:e.loading},on:{click:e.search},slot:"append"},[e._v("点击搜索")])],1)],1)},r=[],s=(a("96cf"),a("1da1")),l={name:"searchAdd",methods:{search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,l,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.input&&e.form.platformVal&&e.form.searchItem){t.next=2;break}return t.abrupt("return",e.$message.warning("请选择参数"));case 2:return e.loading=!0,a=e.form,n=a.platformVal,r=a.input,s=a.searchItemVal,t.prev=4,l={platform:n,mode:"search",action:r,limit:s,uuid:e.$route.params.id},t.next=8,e.$api.SYS_PLAYLIST_SEARCH(l);case 8:i=t.sent,e.$emit("changeList",i,l),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),e.loading=!1;case 15:e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()}},data:function(){return{loading:!1,form:{input:"",platform:[{label:"网易云",value:"netease"}],platformVal:null,searchItem:[{value:"20"},{value:"40"},{value:"60"},{value:"80"},{value:"100"}],searchItemVal:null}}}},i=l,c=(a("7a35"),a("2877")),o=Object(c["a"])(i,n,r,!1,null,"66bfddfe",null);t["default"]=o.exports},"5c86":function(e,t,a){"use strict";var n=a("65ac"),r=a.n(n);r.a},"65ac":function(e,t,a){},"7a35":function(e,t,a){"use strict";var n=a("1ffb"),r=a.n(n);r.a},"929a":function(e,t,a){},a953:function(e,t,a){"use strict";var n=a("bc6b"),r=a.n(n);r.a},b249:function(e,t,a){"use strict";var n=a("929a"),r=a.n(n);r.a},bc6b:function(e,t,a){},d44d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"歌单缓存：保存歌单会自动清理缓存",type:"success",closable:!1}}),a("div",{staticClass:"d2-mb-15"},[a("el-input",{staticClass:"w-50  ",attrs:{placeholder:"请输入歌单名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("歌单名称")])],2)],1),a("div",{staticClass:"d2-mb-15"},[a("el-input",{attrs:{placeholder:"请输入歌单描述",clearable:"",type:"textarea",autosize:""},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1),a("div",{staticClass:"d2-mb-15 w-50",attrs:{flex:"main:center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存 ")]),a("el-button",{attrs:{type:"danger"},on:{click:e.del}},[e._v("删除 ")]),a("el-button",{attrs:{type:"warning"},on:{click:e.truncate}},[e._v("清空 ")])],1)],1)},r=[],s=(a("b0c0"),a("96cf"),a("1da1")),l=a("5530"),i=a("5880"),c={name:"setting",props:{propName:{type:String,default:""},propDesc:{type:String,default:""},propList:{type:Array,default:function(){return[]}}},watch:{propName:function(e,t){this.name=e},propDesc:function(e,t){this.desc=e}},computed:Object(l["a"])(Object(l["a"])({},Object(i["mapState"])("d2admin/page",["current"])),Object(i["mapState"])("d2admin/user",["info"])),methods:Object(l["a"])(Object(l["a"])({},Object(i["mapActions"])("d2admin/page",["close"])),{},{truncate:function(){var e=this;this.$confirm("确定要清空吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("truncate");case 1:case"end":return t.stop()}}),t)})))).catch(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("确定要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.info.name,t.next=3,e.$api.SYS_PLAYLIST_UPDATE(e.$route.params.id,a,{name:e.name,desc:e.desc,playlist:JSON.stringify(e.propList)});case 3:e.$emit("update");case 4:case"end":return t.stop()}}),t)})))).catch(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 1:case"end":return t.stop()}}),t)})))()},del:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("此操作将永久删除该歌单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.info.name,t.next=3,e.$api.SYS_PLAYLIST_DEL(e.$route.params.id,a);case 3:return t.next=5,e.close({tagName:e.current});case 5:case"end":return t.stop()}}),t)})))).catch(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 1:case"end":return t.stop()}}),t)})))()}}),data:function(){return{name:"",desc:""}}},o=c,u=(a("5c86"),a("2877")),p=Object(u["a"])(o,n,r,!1,null,"77011577",null);t["default"]=p.exports},f888:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"使用歌单ID或歌手ID直接导入歌曲到当前歌单，建议歌单内歌曲不超过100首\n如非必要，在基本设置选择歌单类型为调用，无需导入歌单即可加载歌单！",type:"success",closable:!1}}),a("el-select",{staticClass:"block-mb-15 w-50",attrs:{placeholder:"请选择平台"},model:{value:e.form.platformVal,callback:function(t){e.$set(e.form,"platformVal",t)},expression:"form.platformVal"}},e._l(e.form.platform,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"d2-mt-15",attrs:{placeholder:"请输入歌单ID",clearable:""},model:{value:e.form.input,callback:function(t){e.$set(e.form,"input",t)},expression:"form.input"}},[a("template",{slot:"prepend"},[e._v("歌单ID")]),a("el-button",{staticClass:"m-hover m-btn",attrs:{slot:"append",icon:"el-icon-folder-add\n",type:"primary",loading:e.loading},on:{click:e.addplaylist},slot:"append"},[e._v("导入歌单")])],2)],1)},r=[],s=(a("96cf"),a("1da1")),l={name:"addPlayList",methods:{addplaylist:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.input&&e.form.platformVal){t.next=2;break}return t.abrupt("return",e.$message.warning("请选择参数"));case 2:return e.loading=!0,n=e.form,r=n.input,s=n.platformVal,t.prev=4,t.next=7,e.$api.SYS_PLAYLIST_LIST({platform:s,mode:"playlist",action:r});case 7:a=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),e.loading=!1;case 13:e.$emit("importplaylist",a),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[4,10]])})))()}},data:function(){return{loading:!1,form:{input:"",platform:[{label:"网易云",value:"netease"}],platformVal:null}}}},i=l,c=(a("a953"),a("2877")),o=Object(c["a"])(i,n,r,!1,null,"2ea6fbee",null);t["default"]=o.exports}}]);